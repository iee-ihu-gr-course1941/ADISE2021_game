# ADISE21_game
Χαρτιά - Μουτζούρης

url παιχνιδιου https://users.it.teithe.gr/~it175061/myGame/index.php

Απαιτήσεις Web API (παίζουν human-human, με GUI)
           web server
           mysql
           php
           javascript
           apache2
           
 Υλοποιήθηκαν 
              Αρχικοποίηση σύνδεσης-authentication (με password).
              Έλεγχος κανόνων παιχνιδιού.
              Αναγνώριση σειράς παιξιάς.
              Υλοποίηση WebAPI.
              Χρήση JSON για δεδομένα
              Υλοποίηση απλού GUI
              Η κατάσταση του παιχνιδιού αποθηκεύεται πλήρως σε mysql.
              Ο πρώτος παίκτης αρχικοποιεί το board και περιμένει αντίπαλο όπου χρειάζεται.
           
           
Περιγραφη Παιχνιδιου:

Ο μουτζούρης παίζεται ως εξής: Αφού ανακατέψουμε καλά, μοιράζουμε όλη την τράπουλα στους παίχτες έτσι ώστε όλοι να έχουν των ίδιο αριθμό φύλλων (ή + - 1). Κάθε παίχτης αφαιρεί από τα φύλλα που έχει στα χέρια του τα ζευγάρια, δηλαδή, 2 Άσσους 2 δυάρια 2 τριάρια κ.τ.λ. Τα υπόλοιπα τα κρατάμε στο χέρι σαν βεντάλια έτσι ώστε να μπορεί ο άλλος παίχτης να διαλέξει, χωρίς να τα βλέπει, ένα από αυτά. Ο πρώτος παίχτης τραβάει ένα φύλλο από αυτόν που κάθετε στα αριστερά του, αν κάνει ζευγάρι το νέο χαρτί με κάποια από τα δικά του τότε τα ρίχνει, αλλιώς τα κρατάει και συνεχίζει ο επομένως που είναι στα δεξιά του. Όποιος ζευγαρώσει όλα τα φύλλα του βγαίνει από το παιχνίδι. Όποιος μείνει τελευταίος με τον Ρήγα Μπαστούνι (τον Μουτζούρη) στο χέρι του είναι ο χαμένος, και οι υπόλοιποι παίχτες αποφασίζουν την ποινή του.

Μουτζούρης 2 παικτών :

Η εφαρμογή ξεκινάει με το user login όπου αν ο χρήστης δεν έχει λογαριασμό μπορεί να κάνει register. Τα στοιχεία του χρήστη αποθηκεύονται στην βάση δεδομένων. Εφόσον γίνει η είσοδος στο παιχνίδι ο χρήστης πατάει start για να ξεκινήσει και σε περίπτωση που δεν υπάρχει παιχνίδι τότε δημιουργεί ένα νέο και περιμένει για αντίπαλο. Σε περίπτωση που υπάρχει ήδη παιχνίδι τότε κάθεται σε αυτό και μοιράζονται αυτόματα τα χαρτιά. Επειδή η διαδικασία αφαίρεσης χαρτιών είναι χρονοβόρα και ανούσια ο υπολογιστής το κάνει αυτόματα αφού μοιραστούν οι κάρτες. Το παιχνίδι ξεκινάει. Πρώτος παίζει ο χρήστης που έφτιαξε το παιχνίδι και επιλέγει μία κάρτα απο τον αντίπαλο αν έχει ίδια την πετάει αυτόματα το σύστημα αλλιώς παίρνει την κάρτα(μουτζούρης).
Tο παιχνίδι συνεχίζεται μέχρι κάποιος να μείνει χωρίς κάρτες . αυτός είναι ο νικητής του γύρου. Ύστερα οι παίκτες μπορούν να ξεκινήσουν νέο παιχνίδι

API:

Εύρεση παιχνιδιών και επιστροφής τράπουλας 
GET /checkGames
Η παραπάνω συνάρτηση δημιουργεί ένα xmlHttp request στο αρχείο gameControll.php για την λήψη η δημιουργία παιχνιδιού και επιστρέφει ως respond την τράπουλα 

Αφαίρεση καρτών 
GET /disposeCard/ 
Κάνουμε xmlHttprequest για την διαγραφή καρτών που στέλνει ο χρήστης , είτε κατά το ξεσκαρτάρισμα της τράπουλας είτε όταν παίζει ένα φύλλο.

Λήψη αριθμού καρτών αντιπάλου 
GET /getOpponentCards/ 
Request για την λήψη του αριθμού καρτών του αντιπάλου , έτσι εμφανίζουμε κατάλληλο αριθμό καρτών του αντιπάλου ώστε να μπορεί ο χρήστης να επιλέξει κάρτα προς διαγραφή.

Ο χρήστης παίζει μία κάρτα
POST /PlayCard/ 
Συνάρτηση η οποία καλείται όταν ο χρήστης επιλέξει μία κάρτα του αντιπάλου (εφόσον είναι η σειρά του ) η οποία λαμβάνει την κάρτα, ελέγχει αν πρέπει να διαγραφεί και επιστρέφει κατάλληλο μήνυμα(είτε την κάρτα που πρέπει να πάρει ο χρήστης) είτε να πετάξει κάρτα.

Ανάγνωση δεδομένων παιχνιδιού
GET /refreshObj/ 
Επιστρέφει το JSON με τα στοιχεία του παιχνιδιού , χρησιμοποιείται όταν ο χρήστης περιμένει τον αντίπαλο να παίξει. Ο χρήστης ελέγχει συνεχώς αν έφτασε ο γύρος του.

Στοιχεία παιχνιδιού(μεταφέρονται με JSON) :
gameID
Player1
Player2
GameStatus -Κατάσταση παιχνιδιού(waiting , started , ended) 
DECK - λίστα με την τράπουλα που κρατάει ο χρήστης
turn : καθορίζει ποιος παίκτης παίζει 1 ή 2 (παίκτης 1 ή παίκτης 2)



Με λίγα λόγια

Στην index.php εχουμε την αρχική σελίδα που ζητάτε από client να βάλλει 
username και password ή να κάνει εγγραφεί. Αν έχει είδη λογαριασμό τότε 
ελέγχουμε αν τα στοιχεία που έδωσε είναι σωστά μέσω της 
registerManager() διαφορετικά πάει στην σελίδα register.php , για να 
δημιουργήσει λογαριασμό. Σε περίπτωση που είτε δώσει username που 
υπάρχει είδη είτε δεν γράψει τίποτα ή δώσει τα στοιχεία του, γίνονται 
ανάλογα οι κατάλληλες ενέργειες μέσω της registerManager.php. 
Εφόσον κάνει Login  πάμε στην σελίδα game.php όπου εκεί θα έχει την 
δυνατότητα να παίξει το παιχνίδι. Όταν πατήσει το κουμπί “i am ready” 
αρχίζουν οι ενέργειες του αρχείου gameScript.js  . Αρχικά εκτελείτε η 
συνάρτηση checkGames() , η οποία χρησιμοποίει την gameController.php 
για να ελέγξει αν ο χρήστης δεν βρίσκεται σε game, τότε ψάχνει game που 
υπάρχει είδη  ,κάθεται και  μοιράζονται οι κάρτες του  διαφορετικά 
δημιουργεί παιχνίδι και περιμένει τον αντίπαλο (δημιουργείται και η 
τράπουλα όπου στέλνεται στην dataBase ).Εφόσον γίνουν όλες οι 
παραπάνω ενέργειες τότε περιμένουμε απ τον server να πραγματοποιήσει 
όλες τις ενέργειες που δίνονται και μόλις απαντήσει ο server  καλείται  
συνάρτηση respond(). Εντός της συνάρτησες respond() την πρώτη φορά που 
θα κληθεί δημιουργούμε ένα interval ώστε να κάνουμε συνεχώς έλεγχο και 
το άμα μπήκε αντίπαλος . Μόλις μπει ο δεύτερος παίκτης το παιχνίδι 
ξεκινάει .Πρώτα παίζει ο παίκτης 1 ενώ ο δεύτερος περιμένει  
χρησιμοποιώντας  μια ακόμα συνάρτηση refreshObj()  όπου ελέγχει ποιος 
παίκτης έχει σειρά χρησιμοποιώντας την refResp() και στοιχεία που της 
παρέχει η gameINFO.php  και αναμένει απάντηση απ τον server.  
 Πάμε πίσω στην respond(), σε  περίπτωση που το παιχνίδι έχει ξεκινήσει 
παίρνει όλες τις διπλότυπες κάρτες των παικτών και τις αποθηκεύει σε ένα 
πίνακα. Για την οπτική γωνιά των παικτών δεν είχαν ποτέ αυτές τις κάρτες 
.Για να ενημερώσουμε  τον server για το πέταγμα αυτών των καρτών  
χρησιμοποιούμε το πινακάκι που τις αποθηκεύσαμε προηγουμένους και την 
συνάρτηση disposeCard(), η οποία με την βοήθεια της disposeCard.php 
διαγράφει τις κάρτες αυτές απ το data base. Τώρα οι παίκτες έχουν την 
δυνατότητα ανάλογα με την σειρά τους να επιλέξουν κάρτα απ τον 
αντίπαλο .Για να λάβουμε τις κάρτες του αντιπάλου χρησιμοποιούμε την 
getOpponentCards() η οποία ενημερώνει τον Client για το πόσες κάρτες έχει  
ο αντίπαλός του με την βοήθεια της CardsNum.php ( η οποία απλά μετράει 
τις κάρτες του αντιπάλου ) και περιμένει ανταπόκριση απ τον server.Η 
cardsResp()  δημιουργεί τις κάρτες του αντιπάλου. Όταν ο χρήστης πατήσει 
κάποια κάρτα του αντίπαλου , τοτε καλείται η συνάρτηση playcard().Στην 
playCard() αν είναι η σειρά του παίκτη να παίξει τότε καλώ την Playcard.php 
με την οποία επιστρέφουμε την κάρτα που αντιστοιχεί στην κάρτα που 
πατήθηκε . Επίσης αλλάζει την σειρά των παικτών και ενημερώνει τον 
Server. Μόλις επιστραφεί η κάρτα καλείται η cardPlayedResp() η οποία 
ελέγχει αν πρέπει να αφαιρεθεί η αντίστοιχή κάρτα με την συνάρτηση 
removeCardFromTable() στα χέρια μας και η καρτα του αντιπαλου με την  
removeEnemyCard(), ενημερώνει τον client και έπειτα ενημερώνει και τον 
server με την disposeCard()








